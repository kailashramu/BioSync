{% extends "layout.html" %}

{% block title %}Face Biometrics - BioSecure{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h1>Face Biometrics Registration</h1>
        <p class="lead">Capture your facial features for biometric authentication</p>
    </div>
</div>

<div class="row mb-4">
    <div class="col-lg-8 mx-auto">
        <div class="instructions-panel">
            <h5><i class="bi bi-info-circle me-2"></i>Instructions</h5>
            <ul>
                <li>Position your face clearly in the center of the camera view</li>
                <li>Ensure good lighting on your face</li>
                <li>Remove glasses, masks, or other face coverings</li>
                <li>Maintain a neutral expression</li>
                <li>Click the "Capture" button when ready</li>
            </ul>
        </div>
    </div>
</div>

<div id="face-capture-container" class="biometric-capture-container">
    <video id="face-video" class="capture-video" autoplay playsinline></video>
    <canvas id="face-canvas" class="capture-canvas"></canvas>
    
    <form id="face-form" method="POST" action="{{ url_for('biometrics.face_capture') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <!-- Hidden field will be populated with face data by JavaScript -->
    </form>
    
    <div class="text-center mt-3">
        <button id="capture-button" class="btn btn-primary me-2" disabled>
            <i class="bi bi-camera me-1"></i> Capture
        </button>
        <button id="retake-button" class="btn btn-secondary me-2" disabled>
            <i class="bi bi-arrow-repeat me-1"></i> Retake
        </button>
        <button id="save-button" class="btn btn-success" disabled>
            <i class="bi bi-save me-1"></i> Save
        </button>
    </div>
    
    <div id="processing-message" class="processing-message">
        Processing face data...
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/face.js') }}"></script>
{% endblock %}
