<!-- Biometric Containers - Partial Template for MFA verification -->

<!-- Face Biometric Container -->
<div class="biometric-container face-container" style="display: none;">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-person-badge me-2"></i> Face Verification</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="face-capture-container">
                        <video id="face-video" autoplay playsinline></video>
                        <canvas id="face-canvas" style="display: none;"></canvas>
                        <div id="face-overlay"></div>
                    </div>
                    <div class="mt-3">
                        <button id="capture-button" class="btn btn-primary me-2">
                            <i class="bi bi-camera me-1"></i> Capture
                        </button>
                        <button id="retake-button" class="btn btn-outline-secondary me-2" style="display: none;">
                            <i class="bi bi-arrow-repeat me-1"></i> Retake
                        </button>
                        <button id="save-button" class="btn btn-success" style="display: none;">
                            <i class="bi bi-check-circle me-1"></i> Confirm
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <h6 class="alert-heading">Instructions:</h6>
                        <p>Please position your face in the frame and click "Capture". Ensure good lighting and that your face is clearly visible.</p>
                    </div>
                    <div id="processing-message" class="alert alert-warning" style="display: none;">
                        <div class="d-flex align-items-center">
                            <div class="spinner-border spinner-border-sm me-2" role="status">
                                <span class="visually-hidden">Processing...</span>
                            </div>
                            <div>Processing your face image...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Voice Biometric Container -->
<div class="biometric-container voice-container" style="display: none;">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-mic me-2"></i> Voice Verification</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="voice-capture-container">
                        <audio id="voice-audio" controls style="display: none;"></audio>
                        <div id="voice-visualizer" class="voice-visualizer">
                            <canvas id="voice-canvas"></canvas>
                        </div>
                        <div id="recording-indicator" class="recording-indicator" style="display: none;">
                            <div class="recording-pulse"></div>
                            <span>Recording...</span>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button id="record-button" class="btn btn-primary me-2">
                            <i class="bi bi-record-circle me-1"></i> Start Recording
                        </button>
                        <button id="stop-button" class="btn btn-danger me-2" style="display: none;">
                            <i class="bi bi-stop-circle me-1"></i> Stop
                        </button>
                        <button id="playback-button" class="btn btn-outline-secondary me-2" style="display: none;">
                            <i class="bi bi-play-circle me-1"></i> Play
                        </button>
                        <button id="voice-save-button" class="btn btn-success" style="display: none;">
                            <i class="bi bi-check-circle me-1"></i> Confirm
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <h6 class="alert-heading">Instructions:</h6>
                        <p>Please record yourself saying the following phrase:</p>
                        <div class="passphrase p-2 border rounded bg-light text-center mb-2">
                            <strong>"BioSync where your car knows you"</strong>
                        </div>
                        <p>Speak clearly and in a normal tone. Click "Start Recording" when ready.</p>
                    </div>
                    <div id="voice-processing-message" class="alert alert-warning" style="display: none;">
                        <div class="d-flex align-items-center">
                            <div class="spinner-border spinner-border-sm me-2" role="status">
                                <span class="visually-hidden">Processing...</span>
                            </div>
                            <div>Processing your voice sample...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Retina Biometric Container -->
<div class="biometric-container retina-container" style="display: none;">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-eye me-2"></i> Retina Verification</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="retina-capture-container">
                        <video id="retina-video" autoplay playsinline></video>
                        <canvas id="retina-canvas" style="display: none;"></canvas>
                        <div id="retina-overlay" class="retina-overlay">
                            <div class="retina-target"></div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button id="retina-capture-button" class="btn btn-primary me-2">
                            <i class="bi bi-camera me-1"></i> Capture Retina
                        </button>
                        <button id="retina-retake-button" class="btn btn-outline-secondary me-2" style="display: none;">
                            <i class="bi bi-arrow-repeat me-1"></i> Retake
                        </button>
                        <button id="retina-save-button" class="btn btn-success" style="display: none;">
                            <i class="bi bi-check-circle me-1"></i> Confirm
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <h6 class="alert-heading">Instructions:</h6>
                        <p>Please position your eye in the center of the circular target and click "Capture Retina". Ensure good lighting and remain still during capture.</p>
                    </div>
                    <div id="retina-processing-message" class="alert alert-warning" style="display: none;">
                        <div class="d-flex align-items-center">
                            <div class="spinner-border spinner-border-sm me-2" role="status">
                                <span class="visually-hidden">Processing...</span>
                            </div>
                            <div>Processing your retina scan...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Proximity Biometric Container -->
<div class="biometric-container proximity-container" style="display: none;">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-bluetooth me-2"></i> Proximity Verification</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="proximity-scan-container text-center p-4">
                        <i class="bi bi-bluetooth display-1"></i>
                        <div class="proximity-animation">
                            <div class="proximity-pulse"></div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button id="scan-proximity-button" class="btn btn-primary me-2">
                            <i class="bi bi-search me-1"></i> Scan for Devices
                        </button>
                        <button id="pair-button" class="btn btn-success" style="display: none;">
                            <i class="bi bi-link-45deg me-1"></i> Pair Device
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <h6 class="alert-heading">Instructions:</h6>
                        <p>Please make sure your proximity device is powered on and within range. Click "Scan for Devices" to begin.</p>
                    </div>
                    <div id="proximity-device-list" class="mt-3" style="display: none;">
                        <h6>Available Devices:</h6>
                        <div class="list-group" id="device-list-container">
                            <!-- Device list will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Validation Results Container -->
<div id="biometric-validation-results" class="mt-4 d-none">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Validation Results</h5>
        </div>
        <div class="card-body">
            <!-- Validation spinner -->
            <div id="validation-spinner" style="display: none;">
                <div class="text-center py-4">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">Validating...</span>
                    </div>
                    <p class="mt-2">Validating biometric data...</p>
                </div>
            </div>

            <!-- Validation success panel -->
            <div id="validation-success" style="display: none;">
                <div class="alert alert-success">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-check-circle-fill me-3 fs-3"></i>
                        <div>
                            <h5 class="mb-1">Validation Successful</h5>
                            <p class="mb-0">Your identity has been verified successfully.</p>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="mb-3">User Profile</h5>
                        <div class="row mb-2">
                            <div class="col-sm-4 text-secondary">Name</div>
                            <div class="col-sm-8" id="user-name">Loading...</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4 text-secondary">Email</div>
                            <div class="col-sm-8" id="user-email">Loading...</div>
                        </div>
                        
                        <h6>Confidence Score</h6>
                        <div class="progress mb-3">
                            <div id="confidence-bar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                        <div class="text-end text-secondary small">Score: <span id="confidence-score">0</span>%</div>
                    </div>
                </div>
            </div>

            <!-- Validation error panel -->
            <div id="validation-error" style="display: none;">
                <div class="alert alert-danger">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-exclamation-triangle-fill me-3 fs-3"></i>
                        <div>
                            <h5 class="mb-1">Validation Failed</h5>
                            <p class="mb-0" id="error-message">We couldn't verify your identity using the provided biometric data.</p>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info mt-3">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-info-circle me-2"></i>
                        <div>
                            <p class="mb-0">Please try again or use a different biometric method for verification.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>